var engine=function(e){"use strict";const n=navigator.userAgent,t=navigator.serviceWorker,o=n.match(/webOS/i),r=n.match(/Android/i)||n.match(/iPhone/i)||n.match(/iPad/i)||n.match(/iPod/i)||n.match(/BlackBerry/i)||n.match(/Windows Phone/i),i=new Map;function a(e,n){for(const t of i.get(e))t(n)}let c=performance.now(),u=0;const s=[];function d(e){let n=e-c;for(const e of s)e(n);c=e,u=requestAnimationFrame(d)}const f=new Map,A={...(l=_,{set:(e,n,t)=>(e[n]=t,l(e,n,t),!0)}),...function(e){return{defineProperty:(n,t,o)=>(Object.defineProperty(n,t,o),e(n,t),!0)}}(_),...function(e){return{deleteProperty(n,t){e(n,t),delete n[t]}}}((function(e,n){for(const t of f.get(n))t.delete(e)}))};var l;function _(e,n){for(const t of f.get(n))t.add(e)}s.push((function(e){for(const e of m);})),addEventListener("ongamepadconnected",(function(e){m.add(e.gamepad)})),addEventListener("ongamepaddisconnected",(function(e){m.delete(e.gamepad)}));const m=new Set(navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads());addEventListener("keydown",(function(e){a(e.code,e)})),addEventListener("keyup",(function(e){a(e.code,e)}));addEventListener("mousedown",(function(e){})),addEventListener("mousemove",(function(e){})),addEventListener("mouseup",(function(e){})),addEventListener("mousewheel",(function(e){})),addEventListener("contextmenu",(function(e){e.preventDefault()}));addEventListener("touchstart",(function(e){})),addEventListener("touchmove",(function(e){})),addEventListener("touchend",(function(e){})),addEventListener("touchcancel",(function(e){}));function E(e){return fetch(e).then(e=>e.blob())}function L(e){return fetch(e).then(e=>e.json())}function P(e){return fetch(e).then(e=>e.text())}function h(e){return new Promise((function(n,t){let o=new Image;o.onload=function(){n(o)},o.src=e}))}const D={path:"/resources",extensions:{json:L,png:h,mtl:P,obj:P,glsl:P,bin:E}};return addEventListener("online",(function(){})),addEventListener("offline",(function(){})),s.push((function(e){})),e.clamp=function(e,n,t){return e>=t?t:e<=n?n:e},e.createEntity=function(){return new Proxy({},A)},e.defaultGamepadControls={UP:"PAD_UP",DOWN:"PAD_DOWN",LEFT:"PAD_LEFT",RIGHT:"PAD_RIGHT",ACTION1:"PAD_FACE_1",ACTION2:"PAD_FACE_2",ACTION3:"PAD_FACE_3",ACTION4:"PAD_FACE_4",SPECIAL1:"PAD_L_SHOULDER_1",SPECIAL2:"PAD_R_SHOULDER_1",SPECIAL3:"PAD_L_SHOULDER_2",SPECIAL4:"PAD_R_SHOULDER_2",SPECIAL5:"PAD_L_STICK_BUTTON",SPECIAL6:"PAD_R_STICK_BUTTON",SPECIAL7:"PAD_VENDOR",ANALOG1:"PAD_L_STICK_X",ANALOG2:"PAD_L_STICK_Y",ANALOG3:"PAD_R_STICK_X",ANALOG4:"PAD_R_STICK_Y",SELECT:"PAD_SELECT",START:"PAD_START"},e.defaultKeyboardControls={UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",ENTER:"Enter"},e.defaultMouseControls={},e.defaultTouchControls={},e.deleteEntity=function(e){for(const n in e)deleteComponent(e,n)},e.events=i,e.generateNormalizedRandomNumber=function(){return 2*Math.random()-1},e.isMobile=r,e.isTv=o,e.lerp=function(e,n,t){return e+(e-n)*t},e.loadArrayBuffer=function(e){return fetch(e).then(e=>e.arrayBuffer())},e.loadBlob=E,e.loadFormData=function(e){return fetch(e).then(e=>e.formData())},e.loadImage=h,e.loadJson=L,e.loadResource=function(e){let n=e.substring(e.lastIndexOf(".")+1);return D.extensions[n](`${D.path}/${e}`)},e.loadResources=async function(e,n){for(const t in e)e[t]=await n(e[t])},e.loadText=P,e.publish=a,e.registerComponentSystem=function(e,n){(function(e,n,t){if(e.has(n))return e.get(n);{let o=t();return e.set(n,o),o}})(f,e,()=>new Set).add(n)},e.registerSystems=function(){},e.resourceOptions=D,e.serviceWorker=t,e.start=function(){d(performance.now())},e.stop=function(){cancelAnimationFrame(u)},e.subscribe=function(e,n){i.get(e).add(n)},e.systems=s,e.unsubscribe=function(e,n){i.get(e).delete(n)},e.userAgent=n,e}({});
